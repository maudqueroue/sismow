---
title: "Sampling Design Emulator"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Sampling Design Emulator}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sismow)
```

<!-- This vignette is generated by fusen: do not edit by hand -->

<!--
 You need to run the 'description' chunk in the '0-dev_history.Rmd' file before continuing your code there.
-->


## Simulate Transects

`simulate_transects` allows to simulate transects with different conditions :     

- different types of **survey design** such as parallel, zigzag, crossed zigzag or random transects       
- **total transect length** (approximately)   
- **angle** of the transects      
- **segmentation** of the transects
- **segments** length (approximately)

The output is a sf dataframe containing the simulated transects corresponding. The dataframe contains four columns:         
- `transect` : number of the transect    
- `seg_ID` : a unique identifiant for each segments/transect)    
- `effort` : length of each segment/transect)    
- `geometry`    


### Example

For this example, `shape_courseulles`, a dataframe included in this package is used. With `simulate_transect` some transect design are simulated:     
- (1) **parallel** transects with a approximative total length of **400000m**    
- (2) **zigzag** transects with a approximative length of **400000m** that are segmentized with a length of approximatively **2000m** per segment.    
- (3) the `shape_obj` is a density map simulated with `simulate_density` and the design is **parallel** transects with a approximative total length of **400000m** that are segmentized with a length of approximatively **2000m** per segments.


```{r examples-simulate_transects, warning = FALSE}

library(ggplot2)
data("shape_courseulles")

# ------------------------------
# Example 1 : parallel transects with a approximative total length of 400000m
# ------------------------------

transects <- simulate_transects(shape_obj = shape_courseulles,
                             design = "systematic",
                             line.length = 400000)
# Plot
ggplot() +
      geom_sf(data = shape_courseulles) +
      geom_sf(data = transects) 

# ------------------------------
# Example 2 : zigzag transects with a approximative total length of 400000m 
# that are segmentized with a length of approximately 2000m per segment
# ------------------------------

transects <- simulate_transects(shape_obj = shape_courseulles,
                             design = "eszigzag",
                             line.length = 400000,
                             design.angle = 90,
                             segmentize = TRUE,
                             length_segs = 2000)

# Plot
pal <- rep(c("#98C1D9","#EE6C4D","#293241"),nrow(transects)) 
ggplot() +
      geom_sf(data = shape_courseulles) +
      geom_sf(data = transects, aes(colour = seg_ID))+
      scale_colour_manual(values=pal) +
      theme(legend.position = "none")


# ------------------------------
# Example 3 : systematic parallel transects with a approximative total length of 400000m
# that are segmentized with a length of approximately 2000m per segment 
# the `shape_obj` is a density map simulated with `simulate_density`
#-------------------------------

# Create map 
map <- simulate_density(shape_obj = shape_courseulles,
                              grid_size = 1000,
                              density_type = "gradient",
                              gradient_direction = "N",
                              wavelength = 20000,
                              amplitude = 500)

# Create transects
transects <- simulate_transects(shape_obj = map,
                             design = "systematic",
                             line.length = 400000,
                             design.angle = 2,
                             segmentize = TRUE,
                             length_segs = 2000)

# Plot
pal <- rep(c("#98C1D9","#EE6C4D","#293241"),nrow(transects)) 
ggplot() +
      geom_sf(data = map, color = "#D9D9D9") +
      geom_sf(data = transects, aes(colour = seg_ID))+
      scale_colour_manual(values = pal) +
      theme(legend.position = "none")

```

